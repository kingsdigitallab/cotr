{% extends "base.html" %}
{% load staticfiles compress %}

{% block meta_title %}Regions Viewer{% endblock %}

{% block custom_css %}
  <link rel="stylesheet" type="text/x-scss"
        href="{% static 'ctrs_lab/lab_regions.scss' %}">
{% endblock %}

{% block title %}
  <h2>Regions Viewer (prototype)</h2>
{% endblock %}

{% block main %}
{% verbatim %}
<div id="lab-regions" class="">
  <p>
    Parent:
    <select v-model="parent" >
      <option v-for="text in texts" :value="text.attributes.siglum|lowercase" v-if="text.type != 'manuscript'">
        {{ text.attributes.siglum }}
      </option>
    </select>
    <label>
      <input type="checkbox" v-model="is_reading_distant">
      Bird's eye view
    </label>
  </p>

  <table :class="{'distant-reading': is_reading_distant}">
    <thead>
      <tr>
        <th class="heading-rid">Region #</th>
        <th v-for="source in regions_meta.sources">
          {{ source.siglum }}
        </th>
      </tr>
    </thead>
    <tr v-for="region in regions">
      <td><a :href="'/search/?texts='+(regions_meta.sources.map(s => s.id)).join(',')+'&sn='+region.sentence" target="_blank">{{ region.region }}</a></td>
      <td v-for="reading in region.readings" :style="get_reading_style(reading, region)">
        {{ reading.t }}
      </td>
    </tr>
  </table>
</div>
{% endverbatim %}
{% endblock %}

{% block footer_scripts %}
  <script src="{% static 'vue/dist/vue.js' %}"></script>
  <script src="{% static 'ctrs_lab/lab_regions.js' %}"></script>
{% endblock %}
